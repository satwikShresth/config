"use strict";var u=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var $=(s,e)=>{for(var i in e)u(s,i,{get:e[i],enumerable:!0})},b=(s,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of N(e))!A.call(s,o)&&o!==i&&u(s,o,{get:()=>e[o],enumerable:!(r=T(e,o))||r.enumerable});return s};var v=s=>b(u({},"__esModule",{value:!0}),s);var E={};$(E,{default:()=>w});module.exports=v(E);var f=require("react"),t=require("@raycast/api");var S=require("child_process");var m=Object.assign({},process.env,{PATH:"/usr/local/bin:/usr/bin:/opt/homebrew/bin"});var d=require("@raycast/api");var p=require("@raycast/api");function y(s){return(0,S.exec)("tmux list-sessions | awk '{print $1}' | sed 's/://'",{env:m},s)}function x(s,e){return(0,S.exec)(`tmux new-session -d -s ${s}`,{env:m},e)}var a=require("react/jsx-runtime");function w(){let[s,e]=(0,f.useState)(!1),[i,r]=(0,f.useState)("");return(0,a.jsx)(t.Form,{isLoading:s,navigationTitle:"Create New Tmux Session",actions:(0,a.jsx)(t.ActionPanel,{children:(0,a.jsx)(t.Action.SubmitForm,{title:"Create New Session",onSubmit:async o=>{let l=o.newSessionName;e(!0);let n=await(0,t.showToast)({style:t.Toast.Style.Animated,title:""});x(l,(c,g,h)=>{if(c||h){console.error(`exec error: ${c}`),e(!1),n.style=t.Toast.Style.Failure,n.message="Failed to create new session";return}n.style=t.Toast.Style.Success,n.style=t.Toast.Style.Success,n.message=`New session ${l} is setup successfully`,e(!1),(0,t.popToRoot)()})}})}),children:(0,a.jsx)(t.Form.TextField,{title:"New Session Name",id:"newSessionName",error:i,onChange:o=>{!o||o.length===0||y((l,n,c)=>{(l||c)&&(console.error(`exec error: ${l}`),e(!1)),n.trim().split(`
`).includes(o)?r("Session name already exists"):r("")})}})})}
