"use strict";var p=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var x=(t,i)=>{for(var e in i)p(t,e,{get:i[e],enumerable:!0})},b=(t,i,e,r)=>{if(i&&typeof i=="object"||typeof i=="function")for(let o of w(i))!I.call(t,o)&&o!==e&&p(t,o,{get:()=>i[o],enumerable:!(r=h(i,o))||r.enumerable});return t};var g=t=>b(p({},"__esModule",{value:!0}),t);var S={};x(S,{default:()=>A});module.exports=g(S);var a=require("@raycast/api");var u=require("@raycast/api");var T={["ITEM_NOT_FOUND"]:"Unable to find application in list",["UNABLE_TO_GET_LIST"]:"Unable to get application list",["UNABLE_TO_SET_LIST"]:"Unable to set application list"},n=class extends Error{constructor(e){super(T[e]);this.name="HarpoonError",this.code=e}};async function d(){let t=await u.LocalStorage.getItem("defaultList").catch(()=>{throw new n("UNABLE_TO_GET_LIST")});return t?JSON.parse(t):[]}var L=require("@raycast/api");async function m(t){await L.LocalStorage.setItem("defaultList",JSON.stringify(t)).catch(()=>{throw new n("UNABLE_TO_SET_LIST")})}function l(t,i){let e=new Array,r=0;for(let o=t.length-1;o>=0;o-=1){let s=t[o];s.isSticky&&(e.unshift([o,s]),t.splice(o,1))}return t.unshift(i),e.forEach(([o,s])=>{t.splice(o,0,s),r===o&&(r=o+1)}),r}async function f(t,i){let e=await d(),r=e.findIndex(({path:s})=>s===t.path);if(r!==-1)return{didAddItem:!1,index:r};let o=e.length;return i==="first"?o=l(e,t):e.push(t),await m(e),{didAddItem:!0,index:o}}async function c(t){let i=await(0,a.getFrontmostApplication)();if(!i)return await(0,a.showHUD)("No application is running");let{didAddItem:e,index:r}=await f({name:i.name,path:i.path,isSticky:!1},t);e?await(0,a.showHUD)(`"${i.name}" added at position ${r+1}`):await(0,a.showHUD)(`"${i.name}" already exists at position ${r+1}`),await(0,a.closeMainWindow)()}async function A(){await c("first")}
